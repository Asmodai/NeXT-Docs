<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /NextLibrary/Documentation/NextDev/ReleaseNotes/ObjC.rtf -->
<!-- Date: Sun Jan  1 17:04:58 2023 -->
<head>
<title>ObjC</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times">Release 3.3 Copyright</font> &copy;<font face="Times">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times" size="+3">3.3 Release Notes:</font><br>
<font face="Times" size="+3">Objective&#160;C Run-Time System and</font><br>
<font face="Times" size="+3">Common Classes and Functions</font>

<p><br><br>

<p><font face="Times" size="+1">This file contains release notes for the 3.2, 3.1, and 3.0 releases of the Objective C run-time system, and also of the common classes and functions. There were no changes for Release 3.3, 3.2, or 3.1.</font></td></tr>

</table>

<p><br><br><br>

<p><font face="Times" size="+2"><b>Notes Specific to Release 3.0</b></font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times" size="+1">This section contains information about the following topics:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">New features</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Implementation changes</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Incompatible changes</font></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Organizational changes</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times" size="+1"><b>New Features</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1"><b>New Protocol and NXBundle Classes</b></font>

<p><font face="Times" size="+1">Protocol objects are used by the run-time system to keep track of formal protocols employed by the program.&nbsp; Documentation for this new class can be found in:</font>

<p><img src="../../Images/sp.gif" width=18 height=1><font face="Times" size="+1">/NextLibrary/Documentation/NextDev/GeneralRef/15_RunTime/Classes/Protocol.rtf</font>

<p><font face="Times" size="+1">NXBundle objects manage bundles of resources required by an application.&nbsp; The NXBundle class is documented in:</font>

<p><img src="../../Images/sp.gif" width=18 height=1><font face="Times" size="+1">/NextLibrary/Documentation/NextDev/GeneralRef/03_Common/Classes/NXBundle.rtf</font>

<p><br><br>

<p><font face="Times" size="+1"><b>New Run-Time Functions</b></font>

<p><font face="Times" size="+1">The function <b>objc_lookUpClass()</b> has been added to the Objective C run-time functions.&nbsp; Just like <b>objc_getClass()</b>, this function returns the class for a given name.&nbsp; However, if the class is not present, <b>objc_lookUpClass()</b> returns <b>nil</b> rather than considering this to be an error condition.</font>

<p><font face="Times" size="+1">The function <b>sel_registerName()</b> has also been added to allow new selectors to be registered with the Objective C run-time system.&nbsp; Like <b>sel_getUid()</b>, this function gets the selector associated with a given name.&nbsp; However, if there is no selector for that name already present in the system, <b>sel_registerName() </b>allocates a new selector rather than returning <b>nil</b>.</font>

<p><br><br>

<p><font face="Times" size="+1"><b>Making Objective C Thread Safe</b></font>

<p><font face="Times" size="+1">The Objective C run-time system has been made safe for use in multi-threaded programs.&nbsp; Since complete thread-safety requires that a lock be acquired every time a message is sent (which increases the time required to send a message by a factor of approximately three), the thread safety features must be explicitly enabled using the new function <b>objc_setMultithreaded()</b>.</font>

<p><font face="Times" size="+1"><b>Note:</b>&nbsp; The Application Kit and other NEXTSTEP kits don't make use of this Objective-C feature; thus kit classes (and their subclasses) can't be used outside the main thread of execution.</font>

<p><br><br>

<p><font face="Times" size="+1"><b>Thread-Safe Exception Handling</b></font>

<p><font face="Times" size="+1">The exception handling system provided in</font> <font face="Courier">objc/error.h</font> <font face="Times" size="+1">has been made unconditionally thread safe.</font>

<p><br><br>

<p><font face="Times" size="+1"><b>Debugging Interface</b></font>

<p><font face="Times" size="+1">The Object class now implements a method to assist in debugging when using <b>gdb </b>(see <b>Debugger.rtf</b> for information on how to use this feature from <b>gdb</b>).&nbsp; The <b>printForDebugger:</b> method in the Object class prints the name of the receiver's class and the address of the receiver.&nbsp; Classes should override this method to print a more useful description of themselves for debugging purposes.</font>

<p><br><br>

<p><font face="Times" size="+1"><b>Improved Detection of Messaging Freed Objects</b></font>

<p><font face="Times" size="+1">The Objective C run-time system can now detect messages which are sent to objects which have been freed.&nbsp; An error will be reported when this problem is detected.&nbsp; Note that this detection is possible only in the interval between when the object is freed and when the freed space is reused for some new purpose.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times" size="+1"><b>Implementation Changes</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1"><b>Copy Methods</b></font>

<p><font face="Times" size="+1">In release 2.0, Object's <b>copy</b> and <b>copyFromZone:</b> methods were implemented independently.&nbsp; In order to support copying, an object had to implement both methods.&nbsp; In release 3.0, Object's <b>copy</b> method has been changed to call <b>copyFromZone:</b> from the object's zone:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- copy</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">{</font><br>
<img src="../../Images/sp.gif" width=122 height=1><font face="Courier">return [self copyFromZone: [self zone]];</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">}</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1">With this change, an object need only implement the <b>copyFromZone:</b> method to support copying using either method.</font>

<p><font face="Times" size="+1">The <b>copy</b> methods of the List, Storage and HashTable classes have been removed since they were identical to the <b>copy</b> method which they now inherit from Object.</font>

<p><br><br>

<p><font face="Times" size="+1"><b>New Objective C Keyword</b></font>

<p><font face="Times" size="+1">The release 3.0 Objective C compiler implements the type <b>id</b> as a keyword of the language.&nbsp; For this reason,</font> <font face="Courier">objc/objc.h</font> <font face="Times" size="+1">no longer provides a typedef for <b>id</b> when compiling Objective C programs.&nbsp; However, in order to allow</font> <font face="Courier">objc/objc.h</font> <font face="Times" size="+1">to be included by C programs without parse errors,</font> <font face="Courier">objc/objc.h</font> <font face="Times" size="+1">does still provide a typedef for <b>id</b> when the macro <b>__OBJC__</b> is not predefined by the compiler.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times" size="+1"><b>Incompatible Changes</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1"><b>Renamed Methods</b></font>

<p><font face="Times" size="+1">The following methods in the Object class were renamed:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=108 height=1><font face="Courier">+ superClass</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- superClass</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- isKindOfGivenName:</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- isMemberOfGivenName:</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- methodDescFor:</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- instanceMethodDescFor:</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1">The new names are:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=108 height=1><font face="Courier">+ superclass</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- superclass</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- isKindOfClassNamed:</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- isMemberOfClassNamed:</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- descriptionForMethod:</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- descriptionForInstanceMethod:</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1">These new names conform to standard NEXTSTEP spelling conventions and are more descriptive of the method's function.</font>

<p><font face="Times" size="+1">The following methods in the Storage class were renamed:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- insert:(void *)anElement at:(unsigned)index</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- replace:(void *)anElement at:(unsigned)index</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- removeAt:(unsigned)index</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1">The new names are:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- insertElement:(void *)anElement at:(unsigned)index</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- replaceElementAt:(unsigned)index with:(void *)anElement</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- removeElementAt:(unsigned)index</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1">These new names are more compatible with the corresponding methods in the List class:</font></td></tr>

</table>

<p><img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- insertObject:anObject at:(unsigned)index</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- replaceObjectAt:(unsigned)index with:newObject</font><br>
<img src="../../Images/sp.gif" width=108 height=1><font face="Courier">- removeObjectAt:(unsigned)index</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1">Existing programs which use the old methods will continue to work correctly, and source code will still compile (although with warnings).</font>

<p><br><br>

<p><font face="Times" size="+1"><b>Renamed Functions</b></font>

<p><font face="Times" size="+1">The functions <b>class_addInstanceMethods()</b> and <b>class_addClassMethods()</b> have been replaced by the single function <b>class_addMethods()</b>, which better matches the single function <b>class_removeMethods()</b>.</font>

<p><br><br>

<p><font face="Times" size="+1"><b>Objective C Type Encoding Strings</b></font>

<p><font face="Times" size="+1">The Objective C type encodings have been expanded to contain additional information for Distributed Objects.&nbsp; One effect of these changes is that the type strings produced by <b>@encode</b> are no longer compatible with typed streams when the encoded type is a struct.&nbsp; The new encoding for</font> <font face="Courier">struct foo {int x, y;};</font> <font face="Times" size="+1">is </font><font face="Courier">&#34;{foo=ii}&#34;</font><font face="Times" size="+1">, which is not recognized by a typed stream.&nbsp; It expects simply</font> <font face="Courier">&#34;{ii}&#34;</font><font face="Times" size="+1">.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times" size="+1"><b>Known Problems</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1">The data allocated by <b>NXAllocErrorData()</b> may be invalidated by subsequent calls to <b>NXAllocErrorData()</b>.&nbsp; Do not rely on this data remaining valid across multiple calls.&nbsp; It is safe to use <b>NXAllocErrorData()</b> so long as the data will only be used prior to the next call to <b>NXAllocErrorData()</b>.&nbsp; If you need more complex allocation patterns, you should use <b>malloc()</b> to allocate the data and implement your own mechanism to free this data.&nbsp; One possibility is to register the data to be freed in your main event loop.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Times" size="+1"><b>Organizational Changes</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1">The header file</font> <font face="Courier">zone.h</font> <font face="Times" size="+1">has been moved to</font> <font face="Courier">objc/zone.h</font><font face="Times" size="+1">.</font></td></tr>

</table>



<p>

</body>
</html>
