<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /NextLibrary/Documentation/NextDev/DevTools/10_YAP/YAP.rtfd -->
<!-- Date: Sun Jan  1 17:02:20 2023 -->
<head>
<title>YAP</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times">Copyright</font> &copy;<font face="Times">1995 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+4" color="#FF00FF"><b>10</b></font></td></tr>

</table>

<p><br><br>

<p><font face="Times" size="+4"><i>The PostScript Previewers: Yap and pft</i></font>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=107></td>

<td><img src="F0.gif" width=65 height=65></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">Yap is an interactive PostScript previewer for developers who want to write and test PostScript code. Yap lets you enter, edit, and execute PostScript code on the fly and allows you to read and write text files so the code can be used elsewhere.&nbsp; Yap is intended for experimenting with short, hand-created segments of PostScript.&nbsp; It's not useful for previewing page-oriented documents, because it ignores all Encapsulated PostScript comments (such as <b>%%BoundingBox</b> and <b>%%Page</b>).&nbsp; For viewing page-oriented documents, use the Preview application located in <b>/NextApps</b>.</font>

<p><font face="Times" size="+1">The chapter also contains information about a related program, <b>pft</b>, which you can use if you need to communicate with the PostScript Window Server.&nbsp; <b>pft</b> is a command-line utility that runs in a Terminal window, so for general-purpose PostScript editing and viewing it's easier to use Yap.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+3"><b>Using Yap</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">Yap is straightforward to use.&nbsp; Choose the Open or New command in the Document menu&nbsp; to open a document window.&nbsp; Select the Execute command in the Document menu to execute the PostScript code that's in the main window.</font>

<p><font face="Times" size="+1">The result is displayed in the Output window, and PostScript errors are reported in the title bar of the Output window.&nbsp; If there are no errors in the execution of your code, the execution time is reported in the title bar instead.</font>

<p><font face="Times" size="+1">There's only one Output window.&nbsp; Its PostScript rendering area can be resized using the Preferences panel (choose the Preferences command in the Info menu).&nbsp; The Preferences panel also contains options for showing and clearing the PostScript cache.</font>

<p><font face="Times" size="+1">If you change the font in a Yap window, that font will be used in Yap windows created after that as well. The font will also be written to your defaults database and be used the next time you launch Yap.</font>

<p><font face="Times" size="+1">Yap can paste PostScript from the pasteboard; this is useful when debugging programs that write PostScript on the pasteboard. The Paste menu command first checks the pasteboard for PostScript data, then for text data.</font>

<p><font face="Times" size="+1">You can find some sample PostScript programs in the following directory:</font></td></tr>

</table>

<p><img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">/NextDeveloper/Examples/PostScript</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">The following directory contains the source code for Yap:</font></td></tr>

</table>

<p><img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">/NextDeveloper/Examples/Yap</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">Feel free to modify the source code and create your own custom version of the application.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+3"><b>Yap Command Reference</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">This section describes the application-specific menus and commands available in Yap.&nbsp; For descriptions of standard menus and commands, see the <i>User's Guide</i>.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+3"><b>Commands in the Main Menu</b></font>

<p><font face="Times" size="+1">Yap's main menu contains the standard Info, Edit, Windows, Print, Services, Hide, and Quit commands.&nbsp; The Format&nbsp; menu contains the Font command for bringing up the Font menu, and the Page Layout command.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+3"><b>Commands in the Document Menu</b></font>

<p><font face="Times" size="+1">The Document menu provides the standard Open, New, Save, and Save As commands for working with PostScript document windows, plus the Execute command described here.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Helvetica" size="+1"><b>Command</b></font></td>

<td><font face="Helvetica" size="+1"><b>Description</b></font></td></tr>

<tr valign=top>

<td width=124 height=4></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">Execute</font></td>

<td><font face="Times" size="+1">Executes the PostScript code contained in the main window and displays the results in the Output window.</font></td></tr>

</table>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=6></td>

<td><font face="Helvetica" size="+3"><b>The NEXTSTEP Window Server Interface:&nbsp; pft</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1"><b>pft</b> is a simple shell-based utility for communicating with the NEXTSTEP Window Server.&nbsp; You start up the <b>pft</b> program by typing the program name in a shell window.&nbsp; <b>pft</b> first forms a connection to the Window Server.&nbsp; <b>pft</b> then sends the Window Server PostScript code that you type in the shell window, and prints out data received from the Window Server.&nbsp; (<b>pft</b> displays both error messages and values returned by the Window Server on the standard output, in the same window where you type.) Use Control-D to quit <b>pft</b>.</font>

<p><font face="Times" size="+1">The following command-line options are available:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">-NXHost <i>hostname</i></font></td>

<td><font face="Times" size="+1">Directs <b>pft</b> to connect to the Window Server running on the machine <i>hostname</i>.&nbsp; If this option isn't used, the local Window Server is assumed.</font></td></tr>

<tr valign=top>

<td width=124 height=12></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">-f <i>file</i></font></td>

<td><font face="Times" size="+1">Causes the contents of <i>file</i> to be sent to the Window Server before user input is accepted.</font></td></tr>

<tr valign=top>

<td width=124 height=12></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">-s</font></td>

<td><font face="Times" size="+1">Causes <b>pft</b> to exit after a file specified with <b>-f</b> is sent to the Window Server.</font></td></tr>

<tr valign=top>

<td width=124 height=12></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">-NXPSName <i>string</i></font></td>

<td><font face="Times" size="+1">Sets the string that <b>pft</b> uses to find the Window Server that it will connect to.&nbsp; This should be the name that the Window Server used to register itself with <b>nmserver</b>, the Network Message Server.&nbsp; If this option isn't used, the default Window Server name is assumed.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1"><b>pft</b> sends one line of PostScript to the Window Server at a time, and each line is interpreted by the Window Server immediately after you press Return.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+3"><b>Starting the pft Program</b></font>

<p><font face="Times" size="+1">To run the <b>pft</b> program, enter its name in a shell window:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Times" size="+1"><b>pft</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">When <b>pft</b> responds with &quot;Connection to PostScript established,&quot; it's ready to accept PostScript code.&nbsp; If you're running <b>pft</b> in a Terminal window, you can cut and paste PostScript code from another application.</font>

<p><font face="Times" size="+1">When you're finished, quit by typing Control-D (or Control-C) in the shell window that <b>pft</b> is running in.</font>

<p><br><br><br>

<p><font face="Helvetica" size="+3"><b>Executing PostScript Code from a File</b></font>

<p><font face="Times" size="+1">To execute PostScript commands that are contained in a file, you can start <b>pft</b> using the <b>-f</b> option:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Times" size="+1"><b>pft -f</b> <i>file</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">The <i>file</i> argument must be an absolute pathname (that is, starting with either <b>/</b> or <b>~</b>), as shown in these two examples:</font></td></tr>

</table>

<p><img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">pft -f /me/myProgram.ps</font><br>
<img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">pft -f ~/myProgram.ps</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">Alternatively, once you've started running <b>pft</b> the contents of a PostScript file can be executed using the PostScript <b>run </b>operator:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Times" size="+1"><b>(</b><i>file</i>) <b>run</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">In this case, the file name must be an absolute pathname that doesn't start with <b>~</b>:</font></td></tr>

</table>

<p><img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">(/me/myProgram.ps) run</font>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+3"><b>Setting Up a Window</b></font>

<p><font face="Times" size="+1">The first thing you'll probably want to do in <b>pft</b>, once it has established a connection to the Window Server, is set up a window to draw in.&nbsp; There are two ways to do this:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times" size="+1"><img src="../../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Obtain the window number of a window the Server has already set up for some other application (usually one you are using <b>pft</b> to debug), and do your drawing in that window.</font></td></tr>

<tr valign=top>

<td width=105 height=12></td></tr>

<tr valign=top>

<td width=105></td>

<td nowrap><font face="Times" size="+1"><img src="../../../Images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Set up a new window using the PostScript <b>window</b> operator.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">To create a window with the <b>window</b> operator, pass it arguments for its origin, size, and type:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Times" size="+1"><i>x y width height type</i> <b>window</b> <i>window</i></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">where <i>type</i> is one of <b>Retained</b>, <b>Nonretained</b>, or <b>Buffered</b>:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">Retained</font></td>

<td><font face="Times" size="+1">(0)</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">Nonretained</font></td>

<td><font face="Times" size="+1">(1)</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">Buffered</font></td>

<td><font face="Times" size="+1">(2)</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">The <b>window</b> operator returns a unique ID number for the window, and places this number on the operand stack.&nbsp; You'll need this number in order to refer to the window; for ease of reference you can assign the returned window number to a variable, as follows:</font></td></tr>

</table>

<p><img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">/myWindow</font><br>
<img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">100 100 500 500 Buffered window</font><br>
<img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">def</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">The new window isn't in the screen list yet, and therefore doesn't appear on the screen and doesn't receive user events.&nbsp; You can add the window to the screen list with the <b>orderwindow</b> operator:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Times" size="+1"><i>place otherwindow window</i> <b>orderwindow</b></font> <font size="+1"><img src="../../../Images/c2D.gif" width=8 height=4></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">The location of the window in the screen list is specified by <i>place</i>, which can be one of <b>Below</b>, <b>Out</b>, or <b>Above</b>:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">Below</font></td>

<td><font face="Times" size="+1">(</font><font size="+1"><img src="../../../Images/c2D.gif" width=8 height=4></font><font face="Times" size="+1">1)</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">Out</font></td>

<td><font face="Times" size="+1">(0)</font></td></tr>

<tr valign=top>

<td width=124></td>

<td nowrap><font face="Times" size="+1">Above</font></td>

<td><font face="Times" size="+1">(1)</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1"><i>otherwindow</i> should be another window number, or 0 if you want to place the new window above or below all windows currently in the window list.</font>

<p><font face="Times" size="+1">Once the window is in the screen list it appears on the screen, but before you can draw in the window you need to use the <b>windowdeviceround</b> operator to make the window the current window:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=132></td>

<td><font face="Times" size="+1"><i>window</i> <b>windowdeviceround</b></font> <font size="+1"><img src="../../../Images/c2D.gif" width=8 height=4></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Times" size="+1">Once the window is the current window, the results of any drawing code you enter will be displayed:</font></td></tr>

</table>

<p><img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">newpath</font><br>
<img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">20 20 moveto</font><br>
<img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">40 40 lineto</font><br>
<img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">stroke</font><br>
<img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">flushgraphics&nbsp; % necessary if window is buffered</font>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+3"><b>Flushing the Server's Output Buffer</b></font>

<p><font face="Times" size="+1">The connection between <b>pft</b> and the Window Server is buffered in both directions.&nbsp; <b>pft</b> flushes its input buffer, so none of the PostScript you send to the Window Server is ever caught in the buffer.&nbsp; However, you must flush the Window Server's output buffer yourself using the PostScript <b>flush</b> operator.</font>

<p><font face="Times" size="+1">Here's a one-line example showing how to create a 500-pixel by 500-pixel window whose lower left corner is at the lower left corner of the screen.&nbsp; This example removes the window number from the stack and flushes the Window Server's output buffer:</font></td></tr>

</table>

<p><img src="../../../Images/sp.gif" width=124 height=1><font face="Courier">0 0 500 500 Buffered window = flush</font>

<p><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=106></td>

<td><font face="Helvetica" size="+3"><b>Summary Example</b></font>

<p><font face="Times" size="+1">In summary, this simple series of PostScript commands demonstrates how to create a window, draw in the window, and then remove the window:</font></td></tr>

</table>

<p><img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">/myWindow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % Create a variable called myWindow</font><br>
<img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">100 100 50 50 Buffered window % Create a window, and assign the returned</font><br>
<img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">def&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % window number to the myWindow variable</font>

<p><img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">Above 0 myWindow orderwindow&nbsp; % Order myWindow at front of screen list</font><br>
<img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">myWindow windowdeviceround&nbsp;&nbsp;&nbsp; % Make myWindow the current window</font>

<p><img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">newpath&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % Now draw something to myWindow</font><br>
<img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">25 25 15 0 360 arc</font><br>
<img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">fill</font><br>
<img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">flushgraphics&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % Flushing is required for buffered windows</font>

<p><img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">myWindow termwindow&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % Mark myWindow for destruction</font><br>
<img src="../../../Images/sp.gif" width=105 height=1><font face="Courier">nulldevice&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; % Remove references to myWindow</font>



<p>

</body>
</html>
