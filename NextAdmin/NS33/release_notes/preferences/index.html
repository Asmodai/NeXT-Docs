<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<!-- Created with LatinByrd III -->
<!-- File: /NextLibrary/Documentation/NextAdmin/ReleaseNotes/Preferences.rtf -->
<!-- Date: Sun Jan  1 13:56:49 2023 -->
<head>
<title>Preferences</title>
</head>

<body bgcolor="#FFFFFF" text="#000000" link="#0000FF" alink="#FF00FF" vlink="#FF0000">

<basefont size=3>

<p><font face="Times">Release 3.3&nbsp; Copyright</font> &copy;<font face="Times">1994 by NeXT Computer, Inc.&nbsp; All Rights Reserved.</font>

<p><br><br><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times" size="+3">3.3 Release Notes:</font><br>
<font face="Times" size="+3">Preferences</font>

<p><br><br><br>

<p><font face="Times" size="+1">This file contains release notes for the 3.3 and 3.0 releases of Preferences.&nbsp; Items specific to the 3.3 release are listed first, and the other notes follow.</font></td></tr>

</table>

<p><br><br><br>

<p><font face="Helvetica" size="+2"><b>Notes Specific to Release 3.3</b></font>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Helvetica" size="+1"><b>New Features</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times" size="+1">The following new features have been added to Preferences since Release 3.1:</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Password changing UI has been improved.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Preferences modules that aren't appropriate for the current system don't load.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Preferences can now automatically launch a program for a module at startup, without the module having been loaded.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">It's now possible to drag the default menu location partially off of the screen.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">You can remove the menu from the screen altogether by command-clicking on the mini-menu.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Preferences now has better control over sound preferences in a new sound module.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">You can now set your default paper size in the Preferences localization module.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">There's a new module to control loginwindow preferences. (this only appears for users logged in as <b>root</b>).</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">There's a new module for controlling and viewing power management state for Intel machines that support the APM bios.&nbsp; This only loads if your machine has power management features.&nbsp; When the module loads, and extra icon clock is made available that shows the current battery life of your machine.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Preferences now gives feedback when loading modules.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Preferences now deals with duplicate preferences modules more intelligently.&nbsp; It will use the first one of the same name that it find in directories in this order: ~/Library/Preferences, /LocalLibrary/Preferences, /NextLibrary/Preferences and /NextApps/Preferences.app.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Preferences now has API to allow you to define some attributes of a module at startup time.&nbsp; They can be defined via a file named &#34;Info&#34; in the module dir (or in the .lproj's of the module dir). Here's what the Power Management Info file looks like:</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap></td>

<td><img src="../../images/sp.gif" width=18 height=1><font face="Times" size="+1">{</font><br>
<img src="../../images/sp.gif" width=18 height=1><font face="Times" size="+1">&#34;Long Name&#34; = &#34;Power Management Preferences&#34;;</font><br>
<img src="../../images/sp.gif" width=18 height=1><font face="Times" size="+1">&#34;Architectures&#34; = (&#34;i386&#34;);</font><br>
<img src="../../images/sp.gif" width=18 height=1><font face="Times" size="+1">&#34;Test Program&#34; = &#34;apm_present&#34;;</font><br>
<img src="../../images/sp.gif" width=18 height=1><font face="Times" size="+1">}</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap></td>

<td><font face="Times" size="+1">The &#34;Long Name&#34; key is the name of the module as it appears in the title bar.&nbsp; (You no longer need to put your own name in somewhere in the module nib).</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap></td>

<td><font face="Times" size="+1">The &#34;Architectures&#34; is a way to quickly eliminate a module from being loaded.&nbsp; If the current architecture isn't in the listed architectures, the module won't be loaded.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap></td>

<td><font face="Times" size="+1">The &#34;Test Program&#34; is a program that should be run at startup to determine if this module is appropriate for this user on this machine.&nbsp; It should return 0 if the module should be loaded, and any other value if not.&nbsp; If the path to the program doesn't begin with a '/', it is assumed to exist in the module in question.&nbsp; Otherwise it is treated as an absolute path.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap></td>

<td><font face="Times" size="+1">One final possibility is the &#34;Bundle Daemon&#34; field.&nbsp; This allows you to specify a program that is always run when Preferences is launched (if the module would passes the architecture and test program tests).&nbsp; Again, if it doesn't have a leading '/' it is assumed that the program is in the module's directory.&nbsp; NOTE: the daemon is forked off in the background.&nbsp; If Preferences is quit, the daemon will keep running (and doesn't get notified that Preferences has quit).&nbsp; This could lead to multiple instances of your daemon running simultaneously.&nbsp; It's up to you to make sure that this doesn't happen.</font></td></tr>

</table>

<p><br><br><br>

<p><font face="Helvetica" size="+2"><b>Notes Specific to Release 3.0</b></font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times" size="+1">These notes were included with the Release 3.0 version of Preferences.</font></td></tr>

</table>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=36></td>

<td><font face="Helvetica" size="+1"><b>New Features</b></font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td><font face="Times" size="+1">The following new features have been added to Preferences since Release 2.0.</font></td></tr>

</table>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Display Preferences--The color of the display's background can be set.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Localization Preferences--Preferences contains a new layout for 3.0.&nbsp; The Localization layout provides control over all aspects of system localization.&nbsp; The keyboard mapping, system language, and measurement units can be specified.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">System Preferences--Several new font options have been added.</font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap><font face="Times" size="+1"><img src="../../images/bullet1.gif" width=4 height=8 vspace=3></font></td>

<td><font face="Times" size="+1">Dynamic layout loading--Support has been added to allow loading of layouts into the Preferences application.&nbsp; This feature is described briefly below and in more detail in <b>/NextLibrary/Documentation/NextDev/GeneralRef/15_Preferences.</b></font></td></tr>

<tr valign=top>

<td width=72 height=17></td></tr>

<tr valign=top>

<td width=72></td>

<td nowrap></td>

<td><font face="Times" size="+1">Layouts are added by creating a directory for the new layout in <b>/NextLibrary/Preferences</b>, <b>/LocalLibrary/Preferences</b>, or <b>~/Library/Preferences</b>, or by opening a <b>.preferences</b> file package from Workspace.&nbsp; The name of the file package should correspond to the name of the layout.&nbsp; The file package must contain at least two files, a tiff image, and an object module both with the same name as the directory.&nbsp; Additionally an InterfaceBuilder file may be contained in a <b>.lproj</b> directory. For an example look at the directory named <b>Template.bproj</b> in <b>/NextApps/Preferences</b>.&nbsp; The directory <b>/NextApps/Preferences.app/Template</b> can be renamed to &#34;Template.preferences&#34; and opened from Workspace.&nbsp; The&nbsp; file package named &#34;Template.preferences&#34; contains the following files.</font></td></tr>

</table>

<p><img src="../../images/sp.gif" width=96 height=1><font face="Courier">/NextApps/Preferences/Template.preferences/Template</font><br>
<img src="../../images/sp.gif" width=96 height=1><font face="Courier">/NextApps/Preferences/Template.preferences/Template.tiff</font><br>
<img src="../../images/sp.gif" width=96 height=1><font face="Courier">/NextApps/Preferences/Template.preferences/English.lproj/Template.nib</font>

<p><br>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1">The TIFF image file is the icon that will appear in the scrolling list of icons at the top of the Preferences window.</font>

<p><font face="Times" size="+1">The object module should contain a subclass of the object Layout and should be named after the layout.&nbsp; The header for this object is located in <b>apps/Preferences.h</b>.&nbsp; This class will be instantiated when the layout is loaded.&nbsp; If your layout contains more than one mach object module then you should create a single object file using ld.&nbsp; When creating the Mach-O you should use the &#34;-r&#34; option of <b>ld</b> to retain relocation symbols.&nbsp; For example:</font></td></tr>

</table>

<p><img src="../../images/sp.gif" width=108 height=1><font face="Courier">ld -r -o Template.o AnotherClass.o funcs.o Template.o</font>

<p>

<table cellspacing=0 cellpadding=0>

<tr valign=top>

<td width=90></td>

<td><font face="Times" size="+1">This would create a single Mach-O called <b>Template.o</b> that contained three individual Mach-O's, <b>Template.o</b>, <b>AnotherClass.o</b>, and <b>funcs.o</b>.&nbsp; Note that the subclass of Layout must be specified as the last argument on the command line.</font></td></tr>

</table>



<p>

</body>
</html>
